host: nereid.yuiseki.net

ingress:
  enabled: true
  className: nginx

artifacts:
  hostPath: /var/lib/nereid/artifacts
  servicePort: 8080
  enableDirectoryListing: true
  # If true, also expose /static/artifacts on the main host ingress.
  exposeOnMainHost: false
  # Public base URL used by UI links and (by default) Work.status.artifactUrl.
  publicBaseUrl: "https://nereid-artifacts.yuiseki.com"
  ingress:
    enabled: true
    className: nginx
    host: nereid-artifacts.yuiseki.com

images:
  ui: nginxinc/nginx-unprivileged:stable-alpine
  artifacts: nginxinc/nginx-unprivileged:stable-alpine
  api: debian:bookworm-slim
  controller: debian:bookworm-slim

api:
  # Host path of locally built API binary mounted into the API pod.
  binaryHostPath: /home/yuiseki/src/github.com/yuiseki/NEREID/bin/nereid-api
  workNamespace: nereid
  # If set, nereid-api injects spec.grantRef.name for all submitted works.
  # This is the recommended path for SaaS-like UI: users don't choose a grant, the system applies a default one.
  defaultGrant: "nereid-default"
  promptPlanner: auto
  llmBaseUrl: ""
  # Leave empty to auto-select by key type:
  # - OpenAI key -> gpt-4o-mini
  # - Gemini key -> gemini-2.0-flash
  llmModel: ""
  # Optional Gemini-specific override when llmModel is empty.
  geminiModel: ""
  # Optional: set a plaintext key for quick MVP deployment.
  # Prefer secret management in production.
  openaiApiKey: ""
  geminiApiKey: ""

grants:
  default:
    enabled: true
    name: "nereid-default"
    openaiSecretName: "nereid-openai"
    openaiSecretKey: "api-key"
    openaiSecretOptional: true
    # Optional: set to inject GEMINI_API_KEY in the default Grant.
    geminiSecretName: ""
    geminiSecretKey: "api-key"
    geminiSecretOptional: true

controller:
  enabled: true
  # Host path of locally built controller binary mounted into controller pod.
  binaryHostPath: /home/yuiseki/src/github.com/yuiseki/NEREID/bin/nereid-controller
  # Empty means use Helm release namespace.
  workNamespace: ""
  # If empty, artifacts.publicBaseUrl is used.
  artifactBaseUrl: ""
  artifactRetention: 720h
  resyncInterval: 5s
  resources:
    requests:
      cpu: "100m"
      memory: "128Mi"
    limits:
      cpu: "500m"
      memory: "512Mi"

workNamespace:
  name: nereid-work
  labelKey: nereid.yuiseki.net/enforce
  labelValue: enabled

kueue:
  enabled: true
  createFlavor: true
  clusterQueueName: nereid-cq
  localQueueName: nereid-localq
  flavorName: default
  nominalQuota:
    cpu: "32"
    memory: "96Gi"

kyvernoPolicies:
  enabled: true
  requireGvisor: true
  requireRequestsLimits: true
  runtimeClassName: gvisor
  policyNamePrefix: nereid

examples:
  enabled: true
  legacyJob:
    enabled: false
  overpassWorkName: overpass-parks-tokyo
  overpassEndpoint: "https://overpass-api.de/api/interpreter"
  overpassQuery: |
    [out:json][timeout:60];
    (
      way["leisure"="park"](35.55,139.60,35.80,139.90);
      relation["leisure"="park"](35.55,139.60,35.80,139.90);
    );
    out body;
    >;
    out skel qt;
